%---------------------------------------------------------less(N,s(N)).less(N,s(M)) :- less(N,M).lessThan :- less(X,Y),less(Y,X).%---------------------------------------------------------last([X],X).last([H,H2|T],X) :- last([H2|T],X).reva([], Acc, Acc).reva([Y|Z], R, Acc):-        reva(Z, R, [Y|Acc]).reverselast:- reva(L, R, [a]), last(R, b).%----------------------------------------------------------schedule:- cFirst(R), mv(R).mv(R):- tr(R,NewR), mv(NewR).mv(R):- atleast2c(R).   % success iff R is non-safe statetr([c,n|Rs], [n,c|Rs]).    tr([n|Rs], [n|NewRs]):- tr(Rs,NewRs).tr([],[]).cFirst([c|Qs]):- nOnly(Qs).nOnly([n|Qs]):- nOnly(Qs).nOnly([n]).atleast2c([c|L]):- atleast1c(L).atleast2c([n|L]):- atleast2c(L).atleast1c([c|_]).atleast1c([n|L]):- atleast1c(L).%----------------------------------------------------------multiset :-sameMultiSet(o(a,o(a,emptyMultiSet)),o(_X,o(emptyMultiSet,b))).sameMultiSet(X, X).sameMultiSet(o(X, Y), o(X, Z)):-        sameMultiSet(Y, Z).sameMultiSet(o(o(X, Y), Z), U):-         sameMultiSet(o(X, o(Y, Z)), U).sameMultiSet(U, o(o(X, Y), Z)):-        sameMultiSet(U, o(X, o(Y, Z))).sameMultiSet(o(emptyMultiSet, X), Y):-        sameMultiSet(X, Y).sameMultiSet(X, o(emptyMultiSet, Y)):-        sameMultiSet(X, Y).sameMultiSet(o(X, Y), Z):-        sameMultiSet(o(Y, X), Z).%----------------------------------------------------------equal(X,X).equal(Y,X) :- equal(X,Y).equal(X,Z) :- equal(X,Y),equal(Y,Z).equal(inverse(A),inverse(B)) :- equal(A,B).equal(multiply(C,E,F),multiply(D,E,F)) :- equal(C,D).equal(multiply(I,G,J),multiply(I,H,J)) :- equal(G,H).equal(multiply(M,N,K),multiply(M,N,L)) :- equal(K,L).equal(multiply(multiply(V,W,X),Y,multiply(V,W,Z)),multiply(V,W,multiply(X,Y,Z))).equal(multiply(X,X,Y),X).equal(multiply(inverse(Y),Y,X),X).equal(multiply(X,Y,inverse(Y)),X).tbool :- equal(multiply(y,x,x),x).%----------------------------------------------------------% This example used sameMultiSet/3 defined above!blockpair2o:-        causesPair(o(on(s(nul),nul), o(ta(nul), o(cl(s(nul)),em))),                   o(on(s(s(nul)),s(nul)), o(on(s(nul),nul), o(ta(nul),                                                     o(cl(s(s(nul))),em))))).causesPair(I1, I2):-        sameMultiSet(I1, I2).causesPair(I, G):-          actionPair(C, E),        sameMultiSet(o(C, Z), I),        causesPair(o(E, Z), G).actionPair(ho(V), o(ta(V),o(cl(V),em))).actionPair(o(cl(V),o(ta(V),em)), ho(V)).actionPair(o(ho(V),cl(W)), o(on(V,W),o(cl(V),em))).actionPair(o(cl(V),o(on(V,W),em)), o(ho(V),cl(W))).actionPair(o(on(V,W),o(cl(V),em)),           o(on(s(s(V)),s(V)), o(on(s(V),V), o(on(V,W),o(cl(s(s(V))),em))))).actionPair(o(on(s(s(V)),s(V)), o(on(s(V),V), o(on(V,W),o(cl(s(s(V))),em)))),           o(on(V,W), o(cl(V),em))).