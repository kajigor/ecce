trans(stop,_,_) :- fail.trans(skip,tau,stop).trans(choice(X,_Y),A,X1) :- trans(X,A,X1).trans(choice(_X,Y),A,Y1) :- trans(Y,A,Y1).trans(int_choice(X,_Y),tau,X).trans(int_choice(_X,Y),tau,Y).trans(prefix(Ch,X),  Ch ,X).trans(par(X,Y), V, par(X1,Y1)) :-     trans(X, V, X1), trans(Y, V, Y1).     trans(interleave(X,Y), A, interleave(X1,Y) ) :- trans(X,A,X1).trans(interleave(X,Y), A, interleave(X,Y1) ) :- trans(Y,A,Y1).  trans(agent_call(X),A,X1) :- agent(X,AE),trans(AE,A,X1).agent(m,prefix(a,interleave(agent_call(m),agent_call(m)))).agent(p,prefix(a,par(agent_call(p),agent_call(p)))).agent(q,prefix(b,agent_call(q))).agent(s,choice(prefix(a,agent_call(s)),prefix(c,agent_call(q)))).agent(r,choice(prefix(a,agent_call(r)),prefix(b,agent_call(q)))).trace(Expr,[]).trace(Expr,[A|Tr]) :-        trans(Expr,A,NewExpr),        trace(NewExpr,Tr).unsafe(Expr) :- trans(Expr,c,_).unsafe(Expr) :-        trans(Expr,A,NewExpr),        unsafe(NewExpr).type(agent_call(p)).type(par(X,Y)) :- type(X),type(Y).type2(agent_call(m)).type2(interleave(X,Y)) :- type2(X),type2(Y)./* Specialised program generated by Ecce 1.1 *//* PD Goal: ([trans(A,B,C)],[type(rec2(agent_call(p),par),A)]) *//* Parameters: Abs:l InstCheck:v Msv:s NgSlv:g Part:e Prun:n Sel:t Whstl:f Raf:yesFar:yes Dce:yes Poly:y Dpu:no ParAbs:yes Msvp:no *//* Transformation time: 1500 ms *//* Unfolding time: 1383 ms *//* Post-Processing time: 17 ms *//* Specialised Predicates: trans__1(A,B,C) :- trans(A,B,C).*/trans__1(par(A,B),C,par(D,E)) :-     trans__1(A,C,D),     trans__1(B,C,E).trans__1(agent_call(p),a,par(agent_call(p),agent_call(p)))./* after msv: */trans__1(par(A,B),a,par(par(C,D),par(E,F))) :-     trans__1(A,a,par(C,D)),     trans__1(B,a,par(E,F)).trans__1(agent_call(p),a,par(agent_call(p),agent_call(p)))./* Specialised program generated by Ecce 1.1 *//* PD Goal: [trace(A,B)],[type(rec2(agent_call(p),par),A)] *//* Parameters: Abs:c InstCheck:a Msv:s NgSlv:g Part:s Prun:n Sel:o Whstl:a Raf:yesFar:yes Dce:yes Poly:y Dpu:yes ParAbs:yes Msvp:no *//* Transformation time: 917 ms *//* Unfolding time: 766 ms *//* Post-Processing time: 34 ms *//* Specialised Predicates: trace__1(A,B) :- trace(A,B).trans__2(A,B,C) :- trans(A,B,C).*/trace__1(A,[]).trace__1(A,[B|C]) :-     trans__2(A,B,D),     trace__1(D,C).trans__2(par(A,B),C,par(D,E)) :-     trans__2(A,C,D),     trans__2(B,C,E).trans__2(agent_call(p),a,par(agent_call(p),agent_call(p)))./* More Specific Version of Program: */trace__1(A,[]).trace__1(A,[a|B]) :-     trans__2(A,a,par(C,D)),     trace__1(par(C,D),B).trans__2(par(A,B),a,par(par(C,D),par(E,F))) :-     trans__2(A,a,par(C,D)),     trans__2(B,a,par(E,F)).trans__2(agent_call(p),a,par(agent_call(p),agent_call(p)))./* or running John Gallagher's bottom-up regular type analyser: */trans__2(X1,X2,X3) :-t35(X1),t13(X2),t36(X3).   /* infers the good type for trans__2 ! */t35(agent_call(X1)) :-t12(X1).t35(par(X1,X2)) :-t35(X1),t35(X2).t13(a) :-true.t36(par(X1,X2)) :-t39(X1),t40(X2).t12(p) :-true.t39(par(X1,X2)) :-t39(X1),t39(X2).t39(agent_call(X1)) :-t16(X1).t40(par(X1,X2)) :-t40(X1),t40(X2).t40(agent_call(X1)) :-t18(X1).t16(p) :-true.t18(p) :-true.trace__1(X1,X2) :-any(X1),t56(X2).t56([]) :-true.t56([X1|X2]) :-t13(X1),t56(X2).t13(a) :-true.