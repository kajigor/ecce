result(shoot,[alive,loaded|S], [dead|S]).result(load,S, [loaded|S]).result(wait,[bag|S], [tea|S]).reachable(S,[]) :- S = [dead|S2].reachable(S,[A|T]) :- result(A,S,S2), reachable(S2,T).test(T) :- list(T),reachable([bag,alive],T).t(T,R) :- list(T),reachable([bag,alive],T,R).list([]).list([_|T]) :- list(T).reachable(S,[],S).reachable(S,[A|T],R) :- result(A,S,S2), reachable(S2,T,R).